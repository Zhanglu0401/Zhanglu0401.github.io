<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>html-api |  茶九-Blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/chajiu.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="茶九-Blog" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      <canvas class="fireworks"></canvas>
      <style>
        .fireworks {
          position: fixed;
          left: 0;
          top: 0;
          z-index: 99999;
          pointer-events: none;
        }
      </style>
      
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-html+css+js+ts/1-h5-api"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  html-api
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2018/01/26/html+css+js+ts/1-h5-api/" class="article-date">
  <time datetime="2018-01-26T02:24:27.000Z" itemprop="datePublished">2018-01-26</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">3.3k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">13 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      



  
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="一、Canvas-API"><a href="#一、Canvas-API" class="headerlink" title="一、Canvas API"></a>一、Canvas API</h3><hr>
<p><code>canvas API</code>是<code>H5</code>标准中最复杂的部分， 它提供几种属性和方法，可以在<code>canvas</code>元素上创建图形应用</p>
<h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><hr>
<p>以下方法专门用于调用canvas API</p>
<ul>
<li><code>getContext(context)</code>创建可绘制图形的画布上下文，接受两个值，<code>2d</code>和<code>3d</code></li>
<li><code>fillRect(x,y,width,height)</code>绘制实心矩形</li>
<li><code>strokeRect(x,y,width,height)</code>绘制矩形轮廓</li>
<li><code>clearRect(x,y,width,height)</code>清除画布指定区域内容</li>
<li><code>createLinearGradient(x1,y1,x2,y2)</code>创建一个线性渐变效果</li>
<li><code>createRadialGradient(x1,y1,r1,x2,y2,r2)</code>创建一个放射渐变效果</li>
<li><code>addColorStop(position,color)</code>用于声明渐变颜色<code>position</code>范围是<code>0.0-1.0</code> 用于确定颜色开始变化位置</li>
<li><code>beginPath()</code>开始一条新路径</li>
<li><code>closePath()</code>在路径最后实现封闭该路径，它会生成一条直线，连接笔触的最后一个位置与路径的起点。如想要保持路径开放，使用<code>fill()</code>绘图，不用这个方法</li>
<li><code>stroke()</code> 用于创建路径轮廓</li>
<li><code>fill()</code>用于绘制实心形状</li>
<li><code>clip()</code>用于创建一个由路径定义的裁剪区域，只有在落入形状内的内容才绘制到画布上</li>
<li><code>moveTo(x,y)</code>将虚拟笔触移到新位置，下一个方法会从改点的开始继续设置路径</li>
<li><code>lineTo(x,y)</code>在新路径上添加一条直线</li>
<li><code>rect(x,y,width,height)</code>在路径为<code>(x,y)</code>位置上添加<code>width</code>和<code>height</code>矩形</li>
<li><code>arc(x,y,radius,startAngle,endAngle,direction)</code>在路径上添加一条弧线 ,<code>x</code>,<code>y</code>指定弧线的中心，角度单位为弧度，<code>direction</code>是一个表示顺时针或逆时针的布尔值。使用公式 <code>Math.PI/180x</code>角度，将角度转换为半径</li>
<li><code>strokeText(text,x,y,max)</code> 直接在画布上绘制文字轮廓。可选参数，max声明文字最大尺寸</li>
<li><code>fillText(text,x,y,max)</code>直接在画布上绘制实心文字。可选参数，<code>max</code>声明文字最大尺寸</li>
<li><code>translate(x,y)</code>将画布原点移到点<code>(x,y)</code>处，原点<code>（0,0）</code>初始位置位于<code>canvas</code>所在区域的左上角</li>
<li><code>rorate(angle)</code>这个方法可以使画布原点为中心发生旋转，角度必须是弧度。使用公式<code>Math.PI/180x</code> 将角度转换为弧度</li>
<li><code>scale(x,y)</code> 改变画布比例 默认值是<code>（1.0,1.0）</code>这些值可以是负值</li>
<li><code>transform（m1,m2,m3,m4,dx,dy）</code>修改画布的转换矩阵。新矩阵是基于之前的矩阵得到的</li>
<li><code>setTransform（m1,m2,m3,m4,dx,dy）</code>修改画布的转换矩阵。重置之前的值，声明新的值</li>
<li><code>save()</code>保存画布状态，包括转换矩阵、样式属性、裁剪遮罩</li>
<li><code>restore()</code> 恢复上一次保存的状态</li>
<li><code>drawImage()</code> 在画布上绘制图像</li>
</ul>
<h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><hr>
<p><code>canvas API</code>专用属性列表</p>
<ul>
<li><code>rect( x, y, width, height )</code> 绘制矩形</li>
<li><code>fillRect( x, y, width, height )</code> 绘制被填充的矩形</li>
<li><code>strokeRect( x, y, width, height )</code> 绘制矩形（无填充）</li>
<li><code>clearRect( x, y, width, height )</code> 清除指定的矩形内的像素</li>
<li><code>fill()</code> 填充当前绘图（路径）</li>
<li><code>stroke()</code>绘制已定义的路径</li>
<li><code>beginPath()</code> 起始（重置）当前路径</li>
<li><code>moveTo( x, y )</code> 将笔触移动到指定的坐标(x,y)</li>
<li><code>lineTo( x, y )</code> 绘制一条从当前位置到指定的坐标(x,y)的直线</li>
<li><code>clip()</code> 从原始画布剪切任意形状和尺寸的区域</li>
<li><code>quadraticCurveTo()</code> 创建二次贝塞尔曲线</li>
<li><code>bezierCurveTo()</code> 创建三次贝塞尔曲线</li>
<li><code>arc( x, y, radius, startAngle, endAngle, anticlockwise)</code> 绘制圆或圆弧</li>
<li><code>arcTo( x1, y1, x2, y2, radius)</code> 根据给定点画圆弧，再以直线连接两个点</li>
<li><code>isPointInPath( x, y )</code> 检测指定的点是否在当前路径中，在则返回true。</li>
<li><code>fillStyle</code> 设置或返回用于填充绘画的颜色、渐变或模式</li>
<li><code>strokeStyle</code> 设置或返回用于笔触的颜色、渐变或模式</li>
<li><code>shadowColor</code> 设置或返回用于阴影的颜色</li>
<li><code>shadowBlur</code> 设置或返回用于阴影的模糊级别</li>
<li><code>shadowOffsetX</code> 设置或返回阴影与形状的水平距离</li>
<li><code>shadowOffsetY</code> 设置或返回阴影与形状的垂直距离</li>
<li><code>lineCap</code> 设置或返回线条的结束点样式（<code>butt</code>、<code>round</code>、<code>square</code>）</li>
<li><code>lineJoin</code> 设置或返回当两条线交汇时，边角的类型（<code>bevel</code>、<code>round</code>、miter）</li>
<li><code>lineWidth</code> 设置或返回当前的线条宽度</li>
<li><code>miterLimit</code> 设置或返回最大斜接长度</li>
<li><code>createLinearGradient( x0, y0, x1, y1 )</code> 创建线性渐变</li>
<li><code>createPattern( image/canvas/video, repeat )</code> 在指定的方向内重复绘制指定的元素</li>
<li><code>createRadialGradient( x0, y0, r0, x1, y1, r1 )</code>创建径向渐变</li>
<li><code>addColorStop( stop, color )</code> 规定渐变对象中的颜色和停止位置</li>
<li><code>font</code> 设置或返回文本内容的当前字体属性（和css的font一样）</li>
<li><code>textAlign</code> 设置或返回文本内容的当前对齐方式</li>
<li><code>textBaseline</code> 设置或返回在绘制文本时使用的当前文本基线</li>
<li><code>fillText( text, x, y )</code> 在画布上绘制“被填充”的文本</li>
<li><code>strokeText( text, x, y )</code> 在画布上绘制文本（无填充）</li>
<li><code>measureText( text )</code> 返回包含指定文本宽度的对象（属性width获取宽度）</li>
<li><code>drawImage( image/canvas, x, y )</code>、drawImage( image&#x2F;canvas, x, y, width, height )、drawImage( image&#x2F;canvas, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight )&#96; 在画布上绘制图像、画布或视频</li>
<li><code>createImageData( width, height )</code>、createImageData(imageData) 绘制ImageData对象</li>
<li><code>getImageData( x, y, width, height )</code> 返回ImageData对象，该对象为画布上指定的矩形复制像素数据。</li>
<li><code>putImageData( ImageData, x, y )</code>、putImageData( imageData, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight ) 把图像数据放回画布上。</li>
<li><code>width</code> 返回ImageData对象的宽度</li>
<li><code>height</code> 返回<code>ImageData</code>对象的高度</li>
<li><code>data</code> 返回一个对象，包含指定的ImageData对象的图像数据</li>
<li><code>globalAlpha</code> 设置或返回绘图的当前alpha或透明度</li>
<li><code>globalCompositeOperation</code> 设置或返回新图像如何绘制到已有的图像上。</li>
<li><code>scale( x, y )</code> 缩放当前绘图</li>
<li><code>translate( x, y )</code> 重新设置画布上的(0,0)位置</li>
<li><code>rotate( angle )</code> 选择当前绘图，单位为“弧度”，角度转弧度公式<code>（ degrees*Math.PI/180）</code></li>
<li><code>transform( m11, m12, m21, m22, dx, dy )</code> 替换绘图的当前转换矩阵</li>
<li><code>setTransform()</code> 将当前转换重置为单元矩阵，然后运行transform()</li>
<li><code>save()</code> 保存当前环境的状态</li>
<li><code>restore()</code> 恢复之前保存过的路径状态和属性</li>
<li><code>getContext(&#39;2d&#39;)</code> 获取<code>2d</code>对象</li>
<li><code>toDataURL()</code> 将canvas转换成图片，返回地址</li>
</ul>
<h4 id="canvas常用总结"><a href="#canvas常用总结" class="headerlink" title="canvas常用总结"></a>canvas常用总结</h4><hr>
<ul>
<li><p>标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>不支持<code>canvas</code> 的浏览器可以看到的内容</li>
</ul>
</li>
<li><pre><code>&lt;canvas&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  绘制环境</span><br><span class="line"></span><br><span class="line">  - `getContext(&quot;2d&quot;)`;目前支持`2d`的场景</span><br><span class="line"></span><br><span class="line">- 绘制矩形</span><br><span class="line"></span><br><span class="line">  - `rect(L,T,W,H)`:创建一个矩形</span><br><span class="line"></span><br><span class="line">  - `fillRect(L,T,W,H)`:绘制填充的矩形</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    strokeRect(L,T,W,H)</span><br></pre></td></tr></table></figure>

  绘制矩形(无填充)

  - 默认一像素黑色边框
</code></pre>
</li>
<li><p>设置绘图</p>
<ul>
<li><code>fillStyle</code>:填充颜色(绘制<code>canvas</code>是有顺序的)</li>
<li><code>lineWidth</code>:线宽度，笔迹粗细</li>
<li><code>strokeStyle</code>:边线颜色</li>
</ul>
</li>
<li><p>绘制路径</p>
<ul>
<li><code>stroke</code> ：绘制，划线(黑色默认)</li>
<li><code>fill</code> :填充(黑色默认)</li>
<li><code>rect(矩形区域)</code></li>
<li><code>clearRect</code> 擦除一个矩形区域</li>
<li><code>save</code> 进入到XXX（高逼格）状态</li>
<li><code>restore</code> 退出xxx（高逼格）状态</li>
</ul>
</li>
<li><p>绘制圆形</p>
<ul>
<li><code>arc(x,y,半径,起始弧度,结束弧度,旋转方向)</code></li>
<li><code>x</code>，<code>y</code>起始位置</li>
<li>弧度与角度：<code>弧度=角度 x π / 180</code></li>
<li>旋转方向：顺时针（默认：<code>false</code>），逆时针（<code>true</code>）</li>
</ul>
</li>
<li><p>绘制字体</p>
<ul>
<li><code>font</code>：设置字体大小</li>
<li><code>fillText</code>：填充字体</li>
<li><code>strokeText</code>：绘制字体</li>
</ul>
</li>
</ul>
<h3 id="二、视频音频"><a href="#二、视频音频" class="headerlink" title="二、视频音频"></a>二、视频音频</h3><hr>
<ul>
<li><p>视频音频格式的简单介绍</p>
<ul>
<li>常见的视频格式<ul>
<li>视频的组成部分：画面、音频、编码格式</li>
<li>视频编码：H.264、Theora、VP8(google开源)</li>
</ul>
</li>
<li>常见的音频格式<ul>
<li>视频编码：ACC、MP3、Vorbis</li>
</ul>
</li>
</ul>
</li>
<li><p><code>HTML5</code>能在完全脱离插件的情况下播放音视频,但是不是所有格式都支持。</p>
</li>
<li><p>支持的视频格式：</p>
<ul>
<li><code>Ogg=</code>带有<code>Theora</code>视频编码<code>+Vorbis</code>音频编码的<code>Ogg</code>文件</li>
<li><code>MEPG4=</code>带有H.264视频编码<code>+AAC</code>音频编码的<code>MPEG4</code>文件</li>
<li><code>WebM=</code>带有<code>VP8</code>视频编码<code>+Vorbis</code>音频编码的<code>WebM</code>格式</li>
</ul>
</li>
</ul>
<h4 id="Video的使用"><a href="#Video的使用" class="headerlink" title="Video的使用"></a><code>Video</code>的使用</h4><hr>
<ul>
<li>单独用法<ul>
<li>&#96;&#96;</li>
</ul>
</li>
<li>带提示用法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt; video src=&quot;文件地址&quot; controls=&quot;controls&quot;&gt;</span><br><span class="line">	您的浏览器暂不支持video标签。播放视频</span><br><span class="line">&lt;/ video &gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>兼容用法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt; video  controls=&quot;controls&quot;  width=&quot;300&quot;&gt;</span><br><span class="line">	&lt;source src=&quot;move.ogg&quot; type=&quot;video/ogg&quot; &gt;</span><br><span class="line">	&lt;source src=&quot;move.mp4&quot; type=&quot;video/mp4&quot; &gt;</span><br><span class="line">	您的浏览器暂不支持video标签。播放视频</span><br><span class="line">&lt;/ video &gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Video</code>的常见属性</li>
</ul>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">值</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Autoplay</td>
<td align="left">Autoplay</td>
<td align="left">视频就绪自动播放</td>
</tr>
<tr>
<td align="left">controls</td>
<td align="left">controls</td>
<td align="left">向用户显示播放控件</td>
</tr>
<tr>
<td align="left">Width</td>
<td align="left">Pixels(像素)</td>
<td align="left">设置播放器宽度</td>
</tr>
<tr>
<td align="left">Height</td>
<td align="left">Pixels(像素)</td>
<td align="left">设置播放器高度</td>
</tr>
<tr>
<td align="left">Loop</td>
<td align="left">Loop</td>
<td align="left">播放完是否继续播放该视频，循环播放</td>
</tr>
<tr>
<td align="left">Preload</td>
<td align="left">load{auto,meta,none}</td>
<td align="left">规定是否预加载视频。</td>
</tr>
<tr>
<td align="left">Src</td>
<td align="left">url</td>
<td align="left">视频url地址</td>
</tr>
<tr>
<td align="left">Poster</td>
<td align="left">Imgurl</td>
<td align="left">加载等待的画面图片</td>
</tr>
<tr>
<td align="left">Autobuffer</td>
<td align="left">Autobuffer</td>
<td align="left">设置为浏览器缓冲方式，不设置autoply才有效</td>
</tr>
</tbody></table>
<ul>
<li><code>Video</code>的<code>API</code>方法</li>
</ul>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">属性</th>
<th align="left">事件</th>
</tr>
</thead>
<tbody><tr>
<td align="left">play()</td>
<td align="left">currentSrc</td>
<td align="left">play</td>
</tr>
<tr>
<td align="left">pause()</td>
<td align="left">currentTime</td>
<td align="left">pause</td>
</tr>
<tr>
<td align="left">load()</td>
<td align="left">videoWidth</td>
<td align="left">progress</td>
</tr>
<tr>
<td align="left">canPlayType()</td>
<td align="left">videoHeight</td>
<td align="left">error</td>
</tr>
</tbody></table>
<h3 id="三、地理信息与本地存储"><a href="#三、地理信息与本地存储" class="headerlink" title="三、地理信息与本地存储"></a>三、地理信息与本地存储</h3><hr>
<h4 id="地理位置"><a href="#地理位置" class="headerlink" title="地理位置"></a>地理位置</h4><hr>
<ul>
<li><p>经度 : 南北极的连接线</p>
</li>
<li><p>纬度 : 东西连接的线</p>
</li>
<li><p>位置信息从何而来</p>
<ul>
<li><code>IP</code>地址</li>
<li><code>GPS</code>全球定位系统</li>
<li><code>Wi-Fi</code>无线网络</li>
<li>基站</li>
</ul>
</li>
<li><p><code>avigator.geolocation</code></p>
<ul>
<li><p>单次定位请求 ：<code>getCurrentPosition</code>(请求成功,请求失败,数据收集方式)</p>
</li>
<li><p>请求成功函数</p>
<ul>
<li>经度 : <code>coords.longitude</code></li>
<li>纬度 : <code>coords.latitude</code></li>
<li>准确度 : <code>coords.accuracy</code></li>
<li>海拔 : <code>coords.altitude</code></li>
<li>海拔准确度 : <code>coords.altitudeAcuracy</code></li>
<li>行进方向 : <code>coords.heading</code></li>
<li>地面速度 : <code>coords.speed</code></li>
<li>请求的时间: <code>new Date(position.timestamp)</code></li>
</ul>
</li>
<li><p>请求失败函数</p>
<ul>
<li><p>失败编号 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code</span><br></pre></td></tr></table></figure>

<ul>
<li>0 : 不包括其他错误编号中的错误</li>
<li>1 : 用户拒绝浏览器获取位置信息</li>
<li>2 : 尝试获取用户信息，但失败了</li>
<li>3 : 设置了<code>timeout</code>值，获取位置超时了</li>
</ul>
</li>
</ul>
</li>
<li><p>数据收集 : json的形式</p>
<ul>
<li><code>enableHighAcuracy</code> : 更精确的查找，默认<code>false</code></li>
<li><code>timeout</code> : 获取位置允许最长时间，默认<code>infinity</code></li>
<li><code>maximumAge</code> : 位置可以缓存的最大时间，默认<code>0</code></li>
</ul>
</li>
<li><p>多次定位请求* : <code>watchPosition</code></p>
<ul>
<li>移动设备有用，位置改变才会触发</li>
<li>配置参数：<code>frequency</code> 更新的频率</li>
<li>关闭更新请求 : <code>clearWatch</code></li>
</ul>
</li>
<li><p>百度地图<code>API</code></p>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=qZfInp9MaT9Qa0PoNy4Rmx3Y9W9ZXMfw&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="本地存储"><a href="#本地存储" class="headerlink" title="本地存储"></a>本地存储</h4><hr>
<ul>
<li><p><code>Storage</code></p>
<ul>
<li>&#96;&#96;&#96;<br>sessionStorage<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  - `session`临时回话，从页面打开到页面关闭的时间段</span><br><span class="line">  - 窗口的临时存储，页面关闭，本地存储消失</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  localStorage</span><br></pre></td></tr></table></figure>

<ul>
<li>永久存储（可以手动删除数据）</li>
</ul>
</li>
</ul>
</li>
<li><p><code>Storage</code>的特点</p>
<ul>
<li>存储量限制 ( 5M )</li>
<li>客户端完成，不会请求服务器处理</li>
<li><code>sessionStorage</code>数据是不共享、 <code>localStorage</code>共享</li>
</ul>
</li>
<li><p><code>Storage API</code></p>
<ul>
<li><pre><code>setItem()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  :</span><br><span class="line"></span><br><span class="line">  - 设置数据，(`key`,`value`)类型，类型都是字符串</span><br><span class="line">  - 可以用获取属性的形式操作</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  getItem():</span><br></pre></td></tr></table></figure>

- 获取数据，通过`key`来获取到相应的`value`
</code></pre>
</li>
<li><p>&#96;&#96;&#96;<br>removeItem()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  :</span><br><span class="line"></span><br><span class="line">  - 删除数据，通过key来删除相应的`value`</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  clear()</span><br></pre></td></tr></table></figure>

<p>:</p>
<ul>
<li>删除全部存储的值</li>
</ul>
</li>
</ul>
</li>
<li><p>存储事件:</p>
<ul>
<li>当数据有修改或删除的情况下，就会触发<code>storage</code>事件</li>
<li>在对数据进行改变的窗口对象上是不会触发的&#96;</li>
<li><code>Key</code> : 修改或删除的<code>key</code>值，如果调用<code>clear()</code>,<code>key</code>为<code>null</code></li>
<li><code>newValue</code> : 新设置的值，如果调用<code>removeStorage()</code>,<code>key</code>为<code>null</code></li>
<li><code>oldValue</code> : 调用改变前的<code>value</code>值</li>
<li><code>storageArea</code> : 当前的<code>storage</code>对象</li>
<li><code>url</code> : 触发该脚本变化的文档的url</li>
<li>注：<code>session</code>同窗口才可以,例子：<code>iframe</code>操作</li>
</ul>
</li>
</ul>
<h3 id="四、HTML5拖拽"><a href="#四、HTML5拖拽" class="headerlink" title="四、HTML5拖拽"></a>四、HTML5拖拽</h3><hr>
<ul>
<li><p>图片自带拖拽功能</p>
</li>
<li><p>其他元素可设置<code>draggable</code>属性</p>
</li>
<li><p><code>draggable ：true</code></p>
<ul>
<li><p>拖拽元素(被拖拽元素对象)事件 :</p>
<ul>
<li><code>ondragstart</code> : 拖拽前触发</li>
<li><code>ondrag</code> :拖拽前、拖拽结束之间，连续触发</li>
<li><code>ondragend</code> :拖拽结束触发</li>
</ul>
</li>
<li><p>目标元素(拖拽元素被拖到的对象)事件 :</p>
<ul>
<li><p><code>ondragenter</code> :进入目标元素触发</p>
</li>
<li><p><code>ondragover</code>:进入目标、离开目标之间，连续触发</p>
</li>
<li><p><code>ondragleave</code> :离开目标元素触发</p>
</li>
<li><p>&#96;&#96;&#96;<br>ondrop</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">      :在目标元素上释放鼠标触发</span><br><span class="line"></span><br><span class="line">      - 需要在`ondragover`事件里面阻止默认事件</span><br><span class="line"></span><br><span class="line">- 拖拽兼容问题</span><br><span class="line"></span><br><span class="line">  - 火狐浏览器下需设置`dataTransfer`对象才可以拖拽除图片外的其他标签</span><br><span class="line"></span><br><span class="line">    - `dataTransfer`对象</span><br><span class="line"></span><br><span class="line">    - `setData()` : 设置数据 `key`和`value`(必须是字符串)</span><br><span class="line"></span><br><span class="line">    - `getData()` : 获取数据，根据`key`值，获取对应的`value`</span><br><span class="line"></span><br><span class="line">    - `effectAllowed` : 设置光标样式(`none`, `copy`, `copyLink`, `copyMove`, `link`, `linkMove`,`move`, `all` 和`uninitialized`)</span><br><span class="line"></span><br><span class="line">    - `setDragImage` ：三个参数（指定的元素，坐标`X`，坐标`Y`）</span><br><span class="line"></span><br><span class="line">    - ```</span><br><span class="line">      files</span><br></pre></td></tr></table></figure>

<p>： 获取外部拖拽的文件，返回一个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filesList</span><br></pre></td></tr></table></figure>

<p>列表</p>
<ul>
<li><code>filesList</code>下有个<code>type</code>属性，返回文件的类型</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>读取文件信息</p>
<ul>
<li><p>&#96;&#96;&#96;<br>FileReader</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    (读取文件信息)</span><br><span class="line"></span><br><span class="line">    - `readAsDataURL`</span><br><span class="line"></span><br><span class="line">  - 参数为要读取的文件对象</span><br><span class="line"></span><br><span class="line">    - `onload`当读取文件成功完成的时候触发此事件</span><br><span class="line">    - `this. result` 获取读取的文件数据</span><br><span class="line"></span><br><span class="line">### 五、跨文档操作</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- 跨文档请求</span><br><span class="line"></span><br><span class="line">- 同域跨文档</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    iframe</span><br></pre></td></tr></table></figure>

<p>内页：</p>
<ul>
<li>父页面操作子页面：<code>contentWindow</code></li>
<li>子页面操作父页面：<code>window.top</code>(找到最顶级的父页面)&#x2F;<code>parent</code>(第一父页面)</li>
<li>新窗口页：<ul>
<li>父页面操作子页面：<code>window.open</code></li>
<li>子页面操作父页面：<code>window.opener</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>不同域跨文档</p>
<ul>
<li><p>&#96;&#96;&#96;<br>postMessage（“发送的数据”,”接收的域”）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    - `message`事件监听</span><br><span class="line">    - `ev.origin`发送数据来源的域</span><br><span class="line">    - `ev.data` 发送的数据</span><br><span class="line"></span><br><span class="line">  - 通过判断发送的数据来执行相应的需求</span><br><span class="line"></span><br><span class="line">- ajax跨域</span><br><span class="line"></span><br><span class="line">  - `XMLHttpRequest` 新增功能</span><br><span class="line"></span><br><span class="line">    - 跨域请求：修改服务端头信息</span><br><span class="line">      - I`E`兼容：`XDomaiRequest`</span><br><span class="line"></span><br><span class="line">  - 进度事件：</span><br><span class="line"></span><br><span class="line">    - ```</span><br><span class="line">      upload.onprogress(ev)</span><br></pre></td></tr></table></figure>

<p>  上传进度(实现文件上传进度条)</p>
<ul>
<li><p><code>ev.total</code> 发送文件的总量</p>
</li>
<li><p><code>ev.loaded</code> 已发送的量</p>
</li>
<li><p><code>FormData</code> 构建提交二进制数据</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          打赏
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://example.com/2018/01/26/html+css+js+ts/1-h5-api/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/" rel="tag">html</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2018/01/28/html+css+js+ts/1-%E9%9F%B3%E8%A7%86%E9%A2%91/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            html-原生音视频
          
        </div>
      </a>
    
    
      <a href="/2018/01/24/html+css+js+ts/3-js%E5%AE%BD%E9%AB%98%E5%B1%9E%E6%80%A7/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">js宽高属性</div>
      </a>
    
  </nav>

  
   
    
    <script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script>
    <div id="twikoo" class="twikoo"></div>
    <script>
        twikoo.init({
            envId: ""
        })
    </script>
 
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2017-2022
        <i class="ri-heart-fill heart_icon"></i> 茶九
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/茶九.png" alt="茶九-Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<script src="https://cdn.staticfile.org/animejs/3.2.1/anime.min.js"></script>

<script src="/js/clickBoom1.js"></script>
 
<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>